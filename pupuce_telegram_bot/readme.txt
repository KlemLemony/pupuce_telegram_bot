#хэндлер нужен. Потому что не происходит обработки через хэндлер. И машине состояния не понимает к чему обращаться
# т.е. бот изначально не входит в состояние is_everything_ok
# здесь мы не можем использовать message: types.Message, потому что параметр message обрабатывает то, что приходит из хэндлера, а нам ничего не приходит из хэндлера
# хэндлер не нужен, потому что он обрабатывает действие, которое совершает пользователь, а у нас пользователь не соверхшает действий!
# пишем просто функцию.
# нужны midlleware

# вы попытались вызвать метод для чего-то, чего не существует.
#state = Dispatcher.get_current().current_state()
#AttributeError: 'NoneType' object has no attribute 'current_state'
# я пытаюсь вызвать current_state для Dispatcher.get_current()., но Dispatcher.get_current(). - вот этой штуки не существует

# Ошибка возникает потому, что state не был передан в хэндлеры start_cmd и remember_oath. Вместо этого, state был передан в функцию
# start_cmd_handler, которая вызывается по расписанию с помощью AsyncIOScheduler. Поэтому в момент вызова хэндлеров, переменная state
# имеет значение None. Чтобы исправить эту ошибку, необходимо передавать state в хэндлеры напрямую, а не через start_cmd_handler. Для
# этого можно использовать декораторы @dp.callback_query_handler() или @dp.message_handler() без аргумента state. Внутри хэндлеров
# можно использовать FSMContext для работы со стейтами.


#хэндлер нужен. Потому что не происходит обработки через хэндлер. И машине состояния не понимает к чему обращаться
# т.е. бот изначально не входит в состояние is_everything_ok
# попробуй сделать так, чтобы состояние было определено заранее
# нам нужно написать хэндлер, который не ждет никакого сообщения
# здесь мы не можем использовать message: types.Message, потому что параметр message обрабатывает то, что приходит из хэндлера, а нам ничего не приходит из хэндлера
# почему машина не устанавливает состояние без хэндлера?
# dispatcher - это обработчик.
# проблема в том, что машина состояния работает через диспатчер. А поскольку у нас нет хэндлера, то и диспатчеру не передается состояние и он 
# возвращает значение None

# у диспатчера нет состояния
# еще вопрос в том, может ли диспетчер бота отлавливать сообщения от самого себя?

# диспетчер реагирует на любой апдейт на любое событие
# возможно мне помогут мидлваре или вебхуки

# вы попытались вызвать метод для чего-то, чего не существует.
#state = Dispatcher.get_current().current_state()
#AttributeError: 'NoneType' object has no attribute 'current_state'
# я пытаюсь вызвать current_state для Dispatcher.get_current()., но Dispatcher.get_current(). - вот этой штуки не существует